[TOC]
# C++工具技巧2

## top
* 指定进程及下所有线程的top信息	
top -H -p 85233

## strace
[简单介绍1](https://blog.csdn.net/mijichui2153/article/details/85229307)	
[简单介绍2](https://www.cnblogs.com/machangwei-8/p/10388883.html)	

* 程序无法启动，通过strace查看执行哪一步时出错		
strace -o strace.log -tt ./app
* 线程卡主，查看卡在哪里	
strace -p 17553

## pstack
* 查看线程运行位置,跟踪进程栈	
pstack pid

## gcore
* 生成运行程序的core文件		
gcore pid

## gdb
* 通过gdb链接valgrind,输出部分报告而无需退出
```
$valgrind --tool=memcheck --vgdb=yes ./a.out
$gdb ./a.out
(gdb) target remote | vgdb
```
* 基本信息打印
```
info args       打印出当前函数的参数名及其值。     
info locals     打印出当前函数中所有局部变量及其值。        
info catch      打印出当前的函数中的异常处理信息
info threads
set print elements 999 显示完整字符串
```

## 常用linux命令
```
find ./ -name "*"|xargs rm -rf	#文件过多无法删除
tar -zcvf ttt.tar.gz -C /data/nlp/emi_nlp_product --exclude=emi_nlp_v_1.0_9/log emi_nlp_v_1.0_9	#压缩除某些文件之外的所有文件
:e ++enc=utf-8					#中文乱码
```

## 查看网络流量
### netstat
```
netstat -i //按网卡分的网络流量统计
netstat -s //按协议分的网络流量统计
netstat -antup //a:所有连线中的Socket,n:直接使用IP地址,tu:tcp/udp,p:程序名和pid
```